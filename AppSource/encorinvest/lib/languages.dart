/// languages.dart
/// Contains all the localization strings for the EnCorinVest application.
/// By: Kanagawa Yamada
/// EnCorinVest Utilities

// English Translations
class LangEN {
  static const Map<String, String> translations = {
    'app_title': 'EnCorinVest',
    'by': 'By: Kanagawa Yamada',
    'root_access': 'Root Access:',
    'module_installed': 'Module Installed:',
    'module_version': 'Module Version:',
    'current_mode': 'Current Mode:',
    'select_language': 'Select Language:',
    'power_save_desc': 'Prioritizing Battery Over Performance',
    'balanced_desc': 'Balance Battery and Performance',
    'performance_desc': 'Prioritizing Performance Over Battery',
    'clear_desc': 'Clear RAM By Killing All Apps',
    'cooldown_desc': 'Cool Down Your Device\n(Let It Rest for 2 Minutes)',
    'gaming_desc': 'Set to Performance and Kill All Apps',
    'power_save': 'Power Save',
    'balanced': 'Balanced',
    'performance': 'Performance',
    'clear': 'Clear',
    'cooldown': 'Cool Down',
    'gaming_pro': 'Gaming Pro',
    'about_title':
        'Thank you for the great people who helped improve EnCorinVest:',
    'about_quote':
        '"Great Collaboration Lead to Great Innovation"\n~ Kanagawa Yamada (Main Dev)',
    'about_note':
        'EnCorinVest Is Always Free, Open Source, and Open For Improvement',
    'credits_1': 'Rem01 Gaming',
    'credits_2': 'VelocityFox22',
    'credits_3': 'MiAzami',
    'credits_4': 'Kazuyoo',
    'credits_5': 'RiProG',
    'credits_6': 'Lieudahbelajar',
    'credits_7': 'KanaDev_IS',
    'credits_8': 'And All Testers That I Can\'t Mentioned One by One',
    'yes': 'Yes',
    'no': 'No',
    'device': 'Device:',
    'cpu': 'CPU:',
    'os': 'OS:',
    'utilities': 'Utilities',
    // --- Utilities Page ---
    'utilities_title': 'Utilities',
    'hamada_ai': 'HAMADA AI', // Keep existing for the card title if needed
    'hamada_ai_description':
        'Automatically Switch to Performance When Entering Game',
    'downscale_resolution': 'Downscale Resolution',
    'selected_resolution': 'Selected: {resolution}',
    'reset_resolution': 'Reset to Original',
    'hamada_ai_toggle_title': 'Enable HAMADA AI', // New title for the toggle
    'hamada_ai_start_on_boot': 'Start on Boot',
    'edit_game_txt_title': 'Edit game.txt',
    'save_button': 'Save',
    'executing_command': 'Executing...',
    'command_executed': 'Command executed.',
    'command_failed': 'Command failed.',
    'saving_file': 'Saving...',
    'file_saved': 'File saved.',
    'file_save_failed': 'Failed to save file.',
    'reading_file': 'Reading file...',
    'file_read_failed': 'Failed to read file.',
    'writing_service_file': 'Updating boot script...',
    'service_file_updated': 'Boot script updated.',
    'service_file_update_failed': 'Failed to update boot script.',
    'error_no_root': 'Root access required.', // Added for error messages
    'error_file_not_found': 'File not found.', // Added for file operations
    'game_txt_hint': 'Enter game package names, one per line...',
    'resolution_unavailable_message':
        'Resolution control is not available on this device.',
    'applying_changes': 'Applying changes...',
    'copy_logs_title': 'Copy EnCorinVest Logs',
    'copy_logs_description': 'Copy EnCorinVest logs to Download folder',
    'copy_logs_button': 'Copy Logs',
    'logs_copied_success': 'Logs Copied Successfully to {path}',
    'logs_copied_failed': 'Failed to Copy Logs',
    'logs_copied_error': 'An error occurred while copying logs',
    'dnd_title': 'DND Switch',
    'dnd_description': 'Automatically Turn DND on / off',
    'dnd_toggle_title': 'Enable DND Auto Switch',
    'bypass_charging_title': 'Bypass Charging',
    'bypass_charging_description': 'Charge your device without using battery',
    'bypass_charging_toggle': 'Enable Bypass Charging',
    'bypass_charging_unsupported':
        'Bypass charging is not supported on your device',
    'detect_button': 'Detect Bypass Charging',
    'bypass_charging_supported': 'Bypass charging is supported on your device',
  };
}

// Indonesian Translations
class LangID {
  static const Map<String, String> translations = {
    'app_title': 'EnCorinVest',
    'by': 'Oleh: Kanagawa Yamada',
    'root_access': 'Akses Root:',
    'module_installed': 'Modul Terpasang:',
    'module_version': 'Versi Modul:',
    'current_mode': 'Mode Saat Ini:',
    'select_language': 'Pilih Bahasa:',
    'power_save_desc': 'Memprioritaskan Baterai Di Atas Performa',
    'balanced_desc': 'Seimbangkan Baterai dan Performa',
    'performance_desc': 'Memprioritaskan Performa Di Atas Baterai',
    'clear_desc': 'Bersihkan RAM Dengan Membunuh Semua Aplikasi',
    'cooldown_desc':
        'Dinginkan Perangkat Anda\n(Biarkan Beristirahat Selama 2 Menit)',
    'gaming_desc': 'Atur ke Performa dan Bunuh Semua Aplikasi',
    'power_save': 'Hemat Daya',
    'balanced': 'Seimbang',
    'performance': 'Performa',
    'clear': 'Bersihkan',
    'cooldown': 'Dinginkan',
    'gaming_pro': 'Pro Gaming',
    'about_title':
        'Terima kasih kepada orang-orang hebat yang membantu memperbaiki EnCorinVest:',
    'about_quote':
        '"Kolaborasi Hebat Mengarah pada Inovasi Hebat"\n~ Kanagawa Yamada (Pengembang Utama)',
    'about_note':
        'EnCorinVest Selalu Gratis, Sumber Terbuka, dan Terbuka untuk Peningkatan',
    'credits_1': 'Rem01 Gaming',
    'credits_2': 'VelocityFox22',
    'credits_3': 'MiAzami',
    'credits_4': 'Kazuyoo',
    'credits_5': 'RiProG',
    'credits_6': 'Lieudahbelajar',
    'credits_7': 'KanaDev_IS',
    'credits_8': 'Dan Semua Penguji yang Tidak Bisa Disebutkan Satu per Satu',
    'yes': 'Ya',
    'no': 'Tidak',
    'device': 'Perangkat:',
    'cpu': 'CPU:',
    'os': 'OS:',
    'utilities': 'Utilitas',
    // --- Utilities Page ---
    'utilities_title': 'Utilitas',
    'hamada_ai': 'HAMADA AI',
    'hamada_ai_description': 'Otomatis Beralih ke Performa Saat Memasuki Game',
    'downscale_resolution': 'Turunkan Resolusi',
    'selected_resolution': 'Terpilih: {resolution}',
    'reset_resolution': 'Kembali ke Asli',
    'hamada_ai_toggle_title': 'Aktifkan HAMADA AI',
    'hamada_ai_start_on_boot': 'Mulai saat Boot',
    'edit_game_txt_title': 'Edit game.txt',
    'save_button': 'Simpan',
    'executing_command': 'Menjalankan...',
    'command_executed': 'Perintah dijalankan.',
    'command_failed': 'Perintah gagal.',
    'saving_file': 'Menyimpan...',
    'file_saved': 'File disimpan.',
    'file_save_failed': 'Gagal menyimpan file.',
    'reading_file': 'Membaca file...',
    'file_read_failed': 'Gagal membaca file.',
    'writing_service_file': 'Memperbarui skrip boot...',
    'service_file_updated': 'Skrip boot diperbarui.',
    'service_file_update_failed': 'Gagal memperbarui skrip boot.',
    'error_no_root': 'Membutuhkan akses root.',
    'error_file_not_found': 'File tidak ditemukan.',
    'game_txt_hint': 'Masukkan nama paket game, satu per baris...',
    'resolution_unavailable_message':
        'Kontrol resolusi tidak tersedia di perangkat ini.',
    'applying_changes': 'Menerapkan perubahan...',
    'copy_logs_title': 'Salin Log EnCorinVest',
    'copy_logs_description': 'Salin log EnCorinVest ke folder Download',
    'copy_logs_button': 'Salin Log',
    'logs_copied_success': 'Log Berhasil Disalin ke {path}',
    'logs_copied_failed': 'Gagal Menyalin Log',
    'logs_copied_error': 'Terjadi kesalahan saat menyalin log',
    'dnd_title': 'Saklar DND',
    'dnd_description': 'Otomatis Nyalakan / Matikan DND',
    'dnd_toggle_title': 'Aktifkan Saklar Otomatis DND',
    'bypass_charging_title': 'Bypass Charging',
    'bypass_charging_description':
        'Isi daya perangkat tanpa menggunakan baterai',
    'bypass_charging_toggle': 'Aktifkan Bypass Charging',
    'bypass_charging_unsupported':
        'Bypass charging tidak didukung di perangkat Anda',
    'detect_button': 'Deteksi Bypass Charging',
    'bypass_charging_supported': 'Bypass charging didukung di perangkat Anda',
  };
}

// Japanese Translations
class LangJP {
  static const Map<String, String> translations = {
    'app_title': 'エンコリンベスト',
    'by': '作成者: 神奈川山田',
    'root_access': 'ルートアクセス:',
    'module_installed': 'モジュール:',
    'module_version': 'モジュールバージョン:',
    'current_mode': '現在のモード:',
    'select_language': '言語を選択:',
    'power_save_desc': 'バッテリーを優先（パフォーマンス最小）',
    'balanced_desc': 'バッテリーとパフォーマンスのバランス',
    'performance_desc': 'パフォーマンスを優先（バッテリー最小）',
    'clear_desc': 'すべてのアプリを終了してRAMをクリア',
    'cooldown_desc': 'デバイスを冷却\n(2分間休ませる)',
    'gaming_desc': 'パフォーマンスモードですべてのアプリを終了',
    'power_save': '省電力',
    'balanced': 'バランス',
    'performance': 'パフォーマンス',
    'clear': 'クリア',
    'cooldown': '冷却',
    'gaming_pro': 'ゲーミングプロ',
    'about_title': 'エンコリンベストの改善に協力してくれた素晴らしい人々に感謝します:',
    'about_quote': '"偉大なコラボレーションは偉大なイノベーションにつながる"\n~ 神奈川山田 (メイン開発者)',
    'about_note': 'エンコリンベストは常に無料、オープンソース、そして改善に開かれています',
    'credits_1': 'Rem01 Gaming',
    'credits_2': 'VelocityFox22',
    'credits_3': 'MiAzami',
    'credits_4': 'カズヨオ',
    'credits_5': 'RiProG',
    'credits_6': 'リエドラブラジャル',
    'credits_7': 'KanaDev_IS',
    'credits_8': '名前を挙げられなかったすべてのテスター',
    'yes': 'はい',
    'no': 'いいえ',
    'device': 'デバイス:',
    'cpu': 'CPU:',
    'os': 'OS:',
    'utilities': 'ユーティリティ',
    // --- Utilities Page ---
    'utilities_title': 'ユーティリティ',
    'hamada_ai': 'HAMADA AI',
    'hamada_ai_description': 'ゲーム開始時に自動でパフォーマンスモードに切り替え',
    'downscale_resolution': '解像度を下げる',
    'selected_resolution': '選択済み: {resolution}',
    'reset_resolution': 'オリジナルに戻す',
    'hamada_ai_toggle_title': 'HAMADA AI を有効にする',
    'hamada_ai_start_on_boot': '起動時に開始',
    'edit_game_txt_title': 'game.txt を編集',
    'save_button': '保存',
    'executing_command': '実行中...',
    'command_executed': 'コマンドが実行されました。',
    'command_failed': 'コマンドが失敗しました。',
    'saving_file': '保存中...',
    'file_saved': 'ファイルが保存されました。',
    'file_save_failed': 'ファイルの保存に失敗しました。',
    'reading_file': 'ファイルを読み込み中...',
    'file_read_failed': 'ファイルの読み込みに失敗しました。',
    'writing_service_file': 'ブートスクリプトを更新中...',
    'service_file_updated': 'ブートスクリプトが更新されました。',
    'service_file_update_failed': 'ブートスクリプトの更新に失敗しました。',
    'error_no_root': 'ルートアクセスが必要です。',
    'error_file_not_found': 'ファイルが見つかりません。',
    'game_txt_hint': 'ゲームパッケージ名を1行に1つずつ入力...',
    'resolution_unavailable_message': 'このデバイスでは解像度制御は利用できません。',
    'applying_changes': '変更を適用中...',
    'copy_logs_title': 'EnCorinVestログをコピー',
    'copy_logs_description': 'EnCorinVestログをダウンロードフォルダにコピー',
    'copy_logs_button': 'ログをコピー',
    'logs_copied_success': 'ログが正常に {path} にコピーされました',
    'logs_copied_failed': 'ログのコピーに失敗しました',
    'logs_copied_error': 'ログのコピー中にエラーが発生しました',
    'dnd_title': 'DND スイッチ',
    'dnd_description': 'DND の自動オン/オフ切り替え',
    'dnd_toggle_title': 'DND 自動スイッチを有効にする',
    'bypass_charging_title': 'バイパス充電',
    'bypass_charging_description': 'バッテリーを使用せずにデバイスを充電する',
    'bypass_charging_toggle': 'バイパス充電を有効にする',
    'bypass_charging_unsupported': 'お使いのデバイスではバイパス充電はサポートされていません',
    'detect_button': 'バイパス充電を検出',
    'bypass_charging_supported': 'お使いのデバイスではバイパス充電がサポートされています',
  };
}

// Javanese Translations
class LangJV {
  static const Map<String, String> translations = {
    'app_title': 'EnCorinVest',
    'by': 'Dening: Kanagawa Yamada',
    'root_access': 'Akses Root:',
    'module_installed': 'Modul Dipasang:',
    'module_version': 'Versi Modul:',
    'current_mode': 'Mode Saiki:',
    'select_language': 'Pilih Basa:',
    'power_save_desc': 'Ngutamakake Baterai Tinimbang Performa',
    'balanced_desc': 'Seimbangake Baterai lan Performa',
    'performance_desc': 'Ngutamakake Performa Tinimbang Baterai',
    'clear_desc': 'Resiki RAM Kanthi Mateni Kabeh Aplikasi',
    'cooldown_desc': 'Ngandhapake Suhu Piranti\n(Lerenke 2 Menit)',
    'gaming_desc': 'Setel nang Performa lan Mateni Kabeh Aplikasi',
    'power_save': 'Ngirit Daya',
    'balanced': 'Seimbang',
    'performance': 'Performa',
    'clear': 'Resiki',
    'cooldown': 'Adhem',
    'gaming_pro': 'Pro Gaming',
    'about_title':
        'Matur nuwun marang wong-wong apik sing wis mbantu ngapiki EnCorinVest:',
    'about_quote':
        '"Kolaborasi Apik Nggowo Inovasi Apik"\n~ Kanagawa Yamada (Pengembang Utama)',
    'about_note':
        'EnCorinVest Mesti Gratis, Open Source, lan Mesti Terbuka Kanggo Pengembangan',
    'credits_1': 'Rem01 Gaming',
    'credits_2': 'VelocityFox22',
    'credits_3': 'MiAzami',
    'credits_4': 'Kazuyoo',
    'credits_5': 'RiProG',
    'credits_6': 'Lieudahbelajar',
    'credits_7': 'KLD - Kanagawa Lab Dev',
    'credits_8': 'Lan Kabeh Tester sing Ora Bisa Disebutke Siji-siji',
    'yes': 'Nggih',
    'no': 'Mboten',
    'device': 'Piranti:',
    'cpu': 'CPU:',
    'os': 'OS:',
    'utilities': 'Utilitas',
    // --- Utilities Page ---
    'utilities_title': 'Utilitas',
    'hamada_ai': 'HAMADA AI',
    'hamada_ai_description': 'Otomatis Ganti menyang Performa pas Mlebu Game',
    'downscale_resolution': 'Mudhunake Resolusi',
    'selected_resolution': 'Dipilih: {resolution}',
    'reset_resolution': 'Bali menyang Asli',
    'hamada_ai_toggle_title': 'Aktifke HAMADA AI',
    'hamada_ai_start_on_boot': 'Mulai pas Boot',
    'edit_game_txt_title': 'Edit game.txt',
    'save_button': 'Simpen',
    'executing_command': 'Nglakokake...',
    'command_executed': 'Peréntah dilakokake.',
    'command_failed': 'Peréntah gagal.',
    'saving_file': 'Nyimpen...',
    'file_saved': 'File disimpen.',
    'file_save_failed': 'Gagal nyimpen file.',
    'reading_file': 'Moco file...',
    'file_read_failed': 'Gagal moco file.',
    'writing_service_file': 'Nganyari skrip boot...',
    'service_file_updated': 'Skrip boot dianyari.',
    'service_file_update_failed': 'Gagal nganyari skrip boot.',
    'error_no_root': 'Butuh akses root.',
    'error_file_not_found': 'File ora ditemokake.',
    'game_txt_hint': 'Lebokna jeneng paket game, siji per baris...',
    'resolution_unavailable_message':
        'Kontrol resolusi ora kasedhiya ing piranti iki.',
    'applying_changes': 'Nerapake owah-owahan...',
    'copy_logs_title': 'Salin Log EnCorinVest',
    'copy_logs_description': 'Salin log EnCorinVest menyang folder Download',
    'copy_logs_button': 'Salin Log',
    'logs_copied_success': 'Log Kasil Disalin menyang {path}',
    'logs_copied_failed': 'Gagal Nyalin Log',
    'logs_copied_error': 'Ana kesalahan pas nyalin log',
    'dnd_title': 'Saklar DND',
    'dnd_description': 'Otomatis Nguripake / Mateni DND',
    'dnd_toggle_title': 'Aktifke Saklar Otomatis DND',
    'bypass_charging_title': 'Bypass Charging',
    'bypass_charging_description': 'Ngecas piranti tanpa nggunakake batere',
    'bypass_charging_toggle': 'Aktifke Bypass Charging',
    'bypass_charging_unsupported':
        'Bypass charging ora didukung ing piranti sampeyan',
    'detect_button': 'Deteksi Bypass Charging',
    'bypass_charging_supported':
        'Bypass charging didukung ing piranti sampeyan',
  };
}

/// Provides localization based on the selected language code.
class AppLocalizations {
  final String langCode;
  late Map<String, String> _localizedStrings;

  /// Creates an instance of AppLocalizations for the given [langCode].
  /// Defaults to English ('EN') if the code is not recognized.
  AppLocalizations(this.langCode) {
    switch (langCode.toUpperCase()) {
      // Use toUpperCase for case-insensitivity
      case 'EN':
        _localizedStrings = LangEN.translations;
        break;
      case 'ID':
        _localizedStrings = LangID.translations;
        break;
      case 'JP':
        _localizedStrings = LangJP.translations;
        break;
      case 'JV':
        _localizedStrings = LangJV.translations;
        break;
      default:
        _localizedStrings = LangEN.translations; // Default to English
    }
  }

  /// Translates the given [key] into the selected language.
  /// Returns the [key] itself if no translation is found.
  /// Can replace placeholders like {placeholder} with values from [args].
  String translate(String key, {Map<String, String>? args}) {
    // Retrieve translation, default to the key if not found
    String translation = _localizedStrings[key] ?? key;

    // Fallback logic: If translation is missing in the selected language, try English.
    if (translation == key && langCode.toUpperCase() != 'EN') {
      // Use English map directly for fallback
      final englishTranslation = LangEN.translations[key];
      if (englishTranslation != null) {
        print(
            "Warning: Missing translation for key '$key' in language '$langCode'. Falling back to English.");
        translation = englishTranslation;
      } else {
        // Log if key is missing even in English
        print(
            "Warning: Translation key '$key' not found in language '$langCode' or English.");
      }
    } else if (!_localizedStrings.containsKey(key)) {
      // Log if key is missing in the primary language (and it's English or fallback wasn't needed)
      print(
          "Warning: Translation key '$key' not found in language '$langCode'.");
    }

    // Replace placeholders if args are provided
    if (args != null) {
      args.forEach((placeholder, value) {
        translation = translation.replaceAll('{$placeholder}', value);
      });
    }

    return translation;
  }
}
